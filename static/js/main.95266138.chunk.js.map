{"version":3,"sources":["components/ImageGallery/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/ErrorSearch/ErrorSearch.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/services/GetListImg.js","components/ImageGallery/ImageGalleryItem.js","components/Loader/Loader.js","img/error.png","components/ErrorSearch/ErrorSearch.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleQueryChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","this","className","styles","SearchForm","type","SearchFormBtn","SearchFormBtnLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","API_KEY","IMG_TYPE","IMG_ORIENT","GetListImg","page","a","url","fetch","response","ok","json","Promise","reject","Error","propTypes","PropTypes","string","isRequired","number","ImageGalleryItem","src","alt","openModal","ImageGalleryItemImage","onClick","App","Loader","color","height","width","timeout","ErrorSearch","message","ErrorWrapper","role","errorImg","Button","handleLoadMore","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","Overlay","children","ImageGallery","images","showModal","modalImgProps","status","fetchImages","nextQuery","then","hits","length","prevState","catch","incrementPage","reset","scrollDown","setTimeout","scrollTo","top","document","body","scrollHeight","left","behavior","handleLoadBtnClick","searchQuery","toggleModal","handleImgClick","prevProps","prevQuery","ModalImg","map","id","webformatURL","tags","largeImageURL","handleSearchFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.95266138.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__jp--B\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3x_0W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3JyWO\",\"Modal\":\"Modal_Modal__P31PN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2JpE1\",\"ModalImg\":\"ImageGallery_ModalImg__1WcLw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__1Yoww\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ErrorWrapper\":\"ErrorSearch_ErrorWrapper__3EMKk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2kSwB\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport styles from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleQueryChange = event => {\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    const { query } = this.state;\n    event.preventDefault();\n    if (query.trim() === '') {\n      toast.error('Please, enter search query.');\n      return;\n    }\n    this.props.onSubmit(query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    const { query } = this.state;\n    return (\n      <>\n        <header className={styles.Searchbar}>\n          <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\n            <button type=\"submit\" className={styles.SearchFormBtn}>\n              <span className={styles.SearchFormBtnLabel}>Search</span>\n            </button>\n            <input\n              className={styles.SearchFormInput}\n              type=\"text\"\n              value={query}\n              autoComplete=\"off\"\n              autoFocus\n              placeholder=\"Search images and photos\"\n              onChange={this.handleQueryChange}\n            />\n          </form>\n        </header>\n      </>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\n\n// const BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '24123899-30dafe3a116d297502be19e37';\nconst IMG_TYPE = 'photo';\nconst IMG_ORIENT = 'horizontal';\nconst PER_PAGE = 12;\n\nexport default async function GetListImg(query, page) {\n  const url = `https://pixabay.com/api?image_type=${IMG_TYPE}&orientation=${IMG_ORIENT}&q=${query}&page=${page}&per_page=${PER_PAGE}&key=${API_KEY}`;\n\n  const response = await fetch(url);\n  if (response.ok) {\n    return response.json();\n  }\n  return await Promise.reject(new Error('Oops! It is a fail'));\n}\n\nGetListImg.propTypes = {\n  query: PropTypes.string.isRequired,\n  page: PropTypes.number.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({ src, alt, url, openModal }) {\n  return (\n    <li className={styles.ImageGalleryItem}>\n      <img\n        src={src}\n        alt={alt}\n        className={styles.ImageGalleryItemImage}\n        onClick={() => openModal({ url, alt })}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport styles from './Loader.module.css';\n\nexport default class App extends Component {\n  render() {\n    return (\n      <div className={styles.Loader}>\n        <Loader\n          type=\"Circles\"\n          color=\"#00BFFF\"\n          height={80}\n          width={80}\n          timeout={3000}\n        />\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/error.1bb9a542.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport errorImg from 'img/error.png';\nimport styles from './ErrorSearch.module.css';\n\nexport default function ErrorSearch({ message }) {\n  return (\n    <div className={styles.ErrorWrapper} role=\"alert\">\n      <p>{message}</p>\n      <img src={errorImg} alt=\"empty\" />\n    </div>\n  );\n}\n\nErrorSearch.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nexport default function Button({ handleLoadMore }) {\n  return (\n    <button\n      type=\"button\"\n      className={styles.Button}\n      onClick={() => handleLoadMore()}\n    >\n      Load more ...\n    </button>\n  );\n}\n\nButton.propTypes = {\n  handleLoadMore: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Modal.module.css';\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={styles.Overlay} onClick={this.handleBackdropClick}>\n        <div className={styles.Modal}>{this.props.children}</div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport GetListImg from 'components/services/GetListImg';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Loader from 'components/Loader';\nimport ErrorSearch from 'components/ErrorSearch';\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\nimport styles from './ImageGallery.module.css';\n\nexport default class ImageGallery extends Component {\n  static propTypes = {\n    searchQuery: PropTypes.string,\n  };\n\n  state = {\n    images: [],\n    page: 1,\n    error: null,\n    showModal: false,\n    modalImgProps: { url: '', alt: '' },\n    status: 'idle',\n  };\n\n  async componentDidUpdate(prevProps) {\n    const prevQuery = prevProps.searchQuery;\n    const nextQuery = this.props.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      await this.reset(); // ага, щас, і все рухне!\n      this.setState({ status: 'pending' });\n      this.fetchImages(nextQuery);\n    }\n  }\n\n  fetchImages = nextQuery => {\n    const { page } = this.state;\n    GetListImg(nextQuery, page)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          // если ничего не пришло в ответе\n          return Promise.reject(new Error('Sorry! Nothing found'));\n        }\n        // если удалось что-то получить\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          status: 'resolved',\n        }));\n      })\n      // если все плохо\n      .catch(error => this.setState({ error, status: 'rejected' }));\n  };\n\n  incrementPage = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  reset = () => {\n    this.setState({ page: 1, images: [] });\n  };\n\n  scrollDown = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  handleLoadBtnClick = async () => {\n    const nextQuery = this.props.searchQuery;\n    await this.incrementPage(); // ага, щас, і все рухне!\n    this.fetchImages(nextQuery);\n    this.scrollDown();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  handleImgClick = props => {\n    this.setState({ modalImgProps: props });\n    this.toggleModal();\n  };\n\n  render() {\n    const { images, error, status, showModal } = this.state;\n    const { url, alt } = this.state.modalImgProps;\n\n    switch (status) {\n      case 'idle':\n        return <div></div>;\n      case 'pending':\n        return <Loader />;\n      case 'rejected':\n        return <ErrorSearch message={error.message} />;\n      case 'resolved':\n        return (\n          <>\n            {showModal && (\n              <Modal onClose={this.toggleModal}>\n                <img src={url} alt={alt} className={styles.ModalImg} />\n              </Modal>\n            )}\n            <ul className={styles.ImageGallery}>\n              {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n                <ImageGalleryItem\n                  key={id}\n                  src={webformatURL}\n                  url={largeImageURL}\n                  alt={tags}\n                  openModal={this.handleImgClick}\n                />\n              ))}\n            </ul>\n            <Button handleLoadMore={this.handleLoadBtnClick} />\n          </>\n        );\n      default:\n        return Promise.reject(\n          new Error(\n            'Sorry, I am completely at a loss and do not know what to do',\n          ),\n        );\n    }\n  }\n}\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from 'components/Searchbar';\nimport ImageGallery from 'components/ImageGallery';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleSearchFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSearchFormSubmit} />\n        <ImageGallery searchQuery={searchQuery} />\n        <ToastContainer />\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'index.css';\nimport App from 'App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2fbna\",\"SearchForm\":\"Searchbar_SearchForm__3G2pw\",\"SearchFormBtn\":\"Searchbar_SearchFormBtn__1zCF5\",\"SearchFormBtnLabel\":\"Searchbar_SearchFormBtnLabel__11blX\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2FjhH\"};"],"sourceRoot":""}